<!-- FAQ Schema Partial -->
<%
const items = locals.faqItems || (t.help_page && t.help_page.faq && t.help_page.faq.items) || [];
const schema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": items.map((item) => ({
    "@type": "Question",
    "name": String(item.question || item.q || ''),
    "acceptedAnswer": {
      "@type": "Answer",
      "text": String(item.answer || item.a || '')
        .replace(/<[^>]*>/g, '')
        .replace(/\n/g, ' ')
        .trim()
    }
  }))
};
const safeJsonLd = JSON.stringify(schema)
  .replace(/</g, '\\u003c')
  .replace(/>/g, '\\u003e')
  .replace(/&/g, '\\u0026');
%>
<script type="application/ld+json"><%- safeJsonLd %></script>
