<!-- FAQ Schema Partial -->
<% const items=locals.faqItems || (t.help_page && t.help_page.faq && t.help_page.faq.items) || []; %>
  <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    <% items.forEach(function(item, index) { 
      const q = (item.question || item.q || "").replace(/"/g, '\\"');
      const a = (item.answer || item.a || "").replace(/<[^>]*>/g, '').replace(/"/g, '\\"').replace(/\n/g, ' ').trim();
    %>
    {
      "@type": "Question",
      "name": "<%= q %>",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "<%= a %>"
      }
    }<%= index < items.length - 1 ? ',' : '' %>
    <% }); %>
  ]
}
</script>